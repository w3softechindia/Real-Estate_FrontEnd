
<app-agenttopbar></app-agenttopbar>
<app-agentdashboard></app-agentdashboard>

<div class="main-layout">
    <div class="page-layout">
      <div class="container">
        <div class="header">

            <div class="form-group">
              <label for="property">Property</label>
              <select id="property" name="property" required>
                <option value="" disabled selected>Select Property</option>
                <option value="Villa">Villa</option>
                <option value="Apartment">Apartmnet</option>
                <option value="Independent">Independent</option>
              </select>
            </div>
  
            <div class="form-group">
              <label for="date">Lead Added</label>
              <select id="date" name="date">
                <option value="" disabled selected>Select Date Range</option>
                <option value="Today">Today</option>
                <option value="This Week">This Week</option>
                <option value="This Month">This Month</option>
                <option value="Last 3 Months">Last 3 Months</option>
              </select>
            </div>
            
  
            <div class="form-group">
              <label for="state">State</label>
              <select id="state" name="state" required>
                <option value="" disabled selected>Select State</option>
                <option value="Telangana">Telangana</option>
                <option value="Ap">Ap</option>
                <option value="Orissa">Orissa</option>
              </select>
            </div>
  
            <div class="form-group">
              <label for="city">City</label>
              <select id="city" name="city" required>
                <option value="" disabled selected>Select City</option>
                <option value="Hyderabad">Hyderabad</option>
                <option value="Vizag">Vizag</option>
                <option value="Nanakramguda">Nanakramguda</option>
              </select>
            </div>
  
            <div class="form-group">
              <button><i class="fa-solid fa-magnifying-glass"></i></button>
            </div>
  
           </div>
        <div class="table-view">
            <table>
              <thead>
                <tr>
                  <th>lead Name</th>
                  <th>Email</th>
                  <th>Location</th>
                  <th>Budget</th>
                  <th>Property</th>
                  <th>PhoneNo</th>
                  <th>Source</th>
                  <th>Status</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let lead of leads; let i=index">
                  <td>{{ lead.leadName }}</td>
                  <td>{{lead.email}}</td>
                  <td>{{ lead.preferredLocation }}</td>
                  <td>{{ lead.estimatedBudget}}</td>
                  <td>{{ lead.interestedIn }}</td>
                  <td>{{ lead.phoneNumber }} </td>
                  <td>{{ lead.leadSource }}</td>
                  <td>{{ lead.leadStatus }}</td>
                  <td>              
                    <i class="fas fa-eye action-icon view-icon" (click)="openUpdateModal(lead)" title="View/Update"></i>
                    <i class="fas fa-trash-alt action-icon delete-icon" (click)="deleteLead(lead)" title="Delete"></i>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
</div>
</div>
</div>

<!-- Modal Structure -->
<div *ngIf="showModal" class="modal">
  <div class="modal-content">
    <h2>Edit Lead Details</h2>

    <!-- Bind data to form inputs using ngModel -->
     <form [formGroup]="leadForm">
      <div class="row">
      <div class="col-lg-6">
        <div class="mb-3">
    <label for="leadName">Lead Name:</label>
    <input id="leadName" formControlName="leadName" placeholder="Enter lead name">
    </div>
    </div>

    <div class="col-lg-6">
      <div class="mb-3">
    <label for="preferredLocation">Location:</label>
    <input id="preferredLocation" formControlName="preferredLocation" placeholder="Enter address">
    </div>
    </div>

    <div class="col-lg-6">
      <div class="mb-3">
    <label for="phoneNumber">PhoneNumber:</label>
    <input id="phoneNumber" formControlName="phoneNumber" placeholder="Enter city">
    </div>
    </div>

    <div class="col-lg-6">
      <div class="mb-3">
    <label for="email">Email:</label>
    <input id="email" formControlName="email" placeholder="Enter emai;">
    </div>
    </div>

    <div class="col-lg-6">
      <div class="mb-3">
    <label for="leadSource">Source:</label>
    <input id="leadSource" formControlName="leadSource" placeholder="Enter state">
    </div>
    </div>

    <div class="col-lg-6">
      <div class="mb-3">
    <label for="leadStatus">Status:</label>
    <input id="leadStatus" formControlName="leadStatus" placeholder="Enter Status">
    </div>
</div>

 <div class="col-lg-6">
      <div class="mb-3">
    <label for="estimatedBudget">Budget:</label>
    <input id="estimatedBudget" formControlName="estimatedBudget" placeholder="Enter budget">
    </div>
    </div>

     <div class="col-lg-6">
      <div class="mb-3">
    <label for="interestedIn">Property:</label>
    <input id="interestedIn" formControlName="interestedIn" placeholder="Enter state">
    </div>
    </div>

    <div class="modal-actions">
       <button class="update-btn" (click)="updateLead()">Update</button> 
      <button class="cancel-btn" (click)="closeModal()">Cancel</button>
    </div>
    </div>
     </form>
    
  </div>
</div>

